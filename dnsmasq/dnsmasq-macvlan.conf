# Enhanced dnsmasq configuration with MacVlan support
# Provides DHCP + DNS for both bridge and macvlan networks

# Basic DNS configuration
no-resolv
bind-interfaces
domain-needed
expand-hosts
domain=localdomain

# Enable DHCP logging for troubleshooting
log-dhcp

# Interface binding - will bind to all available interfaces
# For macvlan, this will include the macvlan interface
# For bridge networks, this provides DNS services

# Static hostname mappings for bridge network (legacy support)
address=/app1.local/127.0.0.1
address=/app2.local/127.0.0.1
address=/app3.local/127.0.0.1
address=/mysql.local/127.0.0.1
address=/nginx-north.local/127.0.0.1
address=/nginx-south.local/127.0.0.1

# DHCP configuration for bridge network (demonstrative)
dhcp-range=set:bridge,192.168.77.50,192.168.77.150,12h

# DHCP configuration for MacVlan network (real network integration)
# This will be active when containers are on macvlan network
dhcp-range=set:macvlan,192.168.1.100,192.168.1.115,12h

# DHCP options for MacVlan network
dhcp-option=tag:macvlan,3,192.168.1.1        # Gateway
dhcp-option=tag:macvlan,6,192.168.1.1        # DNS server
dhcp-option=tag:macvlan,1,255.255.255.0      # Netmask

# Host-specific DHCP reservations (optional)
# dhcp-host=aa:bb:cc:dd:ee:ff,192.168.1.101,app1-macvlan,12h

# DNS forwarding for external queries
server=8.8.8.8
server=8.8.4.4

# Local domain handling
local=/localdomain/

# Cache settings
cache-size=1000

# Enable TFTP for PXE boot (optional)
# enable-tftp
# tftp-root=/var/lib/tftpboot
